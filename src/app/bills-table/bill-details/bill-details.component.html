        <div class="form-container">
            <div class="form-row">
              <div class="form-column">
                <mat-form-field>
                  <mat-label>Bill Number</mat-label>
                  <input matInput type="text" id="billNumber" name="billNumber" [(ngModel)]="billHeader.billNumber" [value]="billHeader.billNumber || ''">
                </mat-form-field>
              </div>
              
              <div class="form-column">
                <mat-form-field>
                  <mat-label>Delivery Date</mat-label>
                  <input matInput [matDatepicker]="picker1" [(ngModel)]="billHeader.deliveryDate" [value]="billHeader.deliveryDate">
                  <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                  <mat-datepicker #picker1></mat-datepicker>
                </mat-form-field>
              </div>
              
              <div class="form-column">
                <mat-form-field>
                  <mat-label>Document Date</mat-label>
                  <input matInput [matDatepicker]="picker2" [(ngModel)]="billHeader.documentDate" [value]="billHeader.documentDate">
                  <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                  <mat-datepicker #picker2></mat-datepicker>
                </mat-form-field>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-column">
                <mat-form-field>
                  <mat-label>Due Date</mat-label>
                  <input matInput [matDatepicker]="picker3" [(ngModel)]="billHeader.dueDate" [value]="billHeader.dueDate">
                  <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                  <mat-datepicker #picker3></mat-datepicker>
                </mat-form-field>
              </div>
              
              <div class="form-column">
                <mat-form-field>
                  <mat-label>Description</mat-label>
                  <input matInput type="text" id="description" name="description" [(ngModel)]="billHeader.description" [value]="billHeader.description || ''">
                </mat-form-field>
              </div>
              
              <div class="form-column">
                <mat-form-field>
                  <mat-label>Note</mat-label>
                  <input matInput type="text" id="note" name="note" [(ngModel)]="billHeader.note" [value]="billHeader.note || ''">
                </mat-form-field>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-column">
                <mat-form-field>
                  <mat-label>Place of Issue</mat-label>
                  <input matInput type="text" id="placeOfIssue" name="placeOfIssue" [(ngModel)]="billHeader.placeOfIssue" [value]="billHeader.placeOfIssue || ''">
                </mat-form-field>
              </div>
              
              <div class="form-column">
                <mat-form-field>
                  <mat-label>Issue Date</mat-label>
                  <input matInput [matDatepicker]="picker4" [(ngModel)]="billHeader.issueDate" [value]="billHeader.issueDate">
                  <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                  <mat-datepicker #picker4></mat-datepicker>
                </mat-form-field>
              </div>
              
              <div class="form-column">
                <mat-form-field>
                  <mat-label>Fiscal Number</mat-label>
                  <input matInput type="text" id="fiscalNumber" name="fiscalNumber" [(ngModel)]="billHeader.fiscalNumber" [value]="billHeader.fiscalNumber || ''">
                </mat-form-field>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-column">
                <mat-form-field>
                  <mat-label>Partner</mat-label>
                  <mat-select [(ngModel)]="billHeader.partnerId" name="partner">
                    <mat-option *ngFor="let partner of partners" [value]="partner.id">{{ partner.id + ' : ' + partner.name }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            
              <div class="form-column">
                <mat-form-field>
                  <mat-label>Rate</mat-label>
                  <input class="number-column" matInput type="number" id="rate" name="rate" [(ngModel)]="billHeader.rate" [value]="billHeader.rate || 0">
                </mat-form-field>
              </div>
            </div>

          <div class="bill-bodies">
            <h2>Bill Bodies</h2>
              <table mat-table [dataSource]="billBodiesSource" class="mat-elevation-z8">
                <ng-container matColumnDef="select">
                  <th mat-header-cell *matHeaderCellDef></th>
                  <td mat-cell *matCellDef="let billBody">
                    <mat-checkbox></mat-checkbox>
                  </td>
                </ng-container>
            
                <ng-container matColumnDef="description">
                  <th mat-header-cell *matHeaderCellDef>Description</th>
                  <td mat-cell *matCellDef="let billBody">
                    <mat-form-field>
                      <mat-label>Description</mat-label>
                      <textarea matInput class="description" name="description" [(ngModel)]="billBody.description" [value]="billBody.description || ''" minlength="1"></textarea>
                    </mat-form-field>
                  </td>
                </ng-container>
            
                <ng-container matColumnDef="quantity">
                  <th mat-header-cell *matHeaderCellDef>Quantity</th>
                  <td mat-cell *matCellDef="let billBody">
                    <mat-form-field>
                      <mat-label>Quantity</mat-label>
                      <input matInput class="number-column" type="number" [(ngModel)]="billBody.quantity" min="0">
                    </mat-form-field>
                  </td>
                </ng-container>
            
                <ng-container matColumnDef="bamPrice">
                  <th mat-header-cell *matHeaderCellDef>BAM Price</th>
                  <td mat-cell *matCellDef="let billBody">
                    <mat-form-field>
                      <mat-label>BAM Price</mat-label>
                      <input matInput class="number-column" type="number" [(ngModel)]="billBody.bamPrice" (change)="updateBillBodyValues(billBody, true)" min="0">
                    </mat-form-field>
                  </td>
                </ng-container>
            
                <ng-container matColumnDef="foreignExchangePrice">
                  <th mat-header-cell *matHeaderCellDef>Foreign Exchange Price</th>
                  <td mat-cell *matCellDef="let billBody">
                    <mat-form-field>
                      <mat-label>Foreign Exchange Price</mat-label>
                      <input matInput class="number-column" type="number" [(ngModel)]="billBody.foreignExchangePrice" (change)="updateBillBodyValues(billBody)" min="0">
                    </mat-form-field>
                  </td>
                </ng-container>
            
                <ng-container matColumnDef="invoiceValue">
                  <th mat-header-cell *matHeaderCellDef>Invoice Value</th>
                  <td mat-cell *matCellDef="let billBody">
                    {{ billBody.invoiceValue }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="discount">
                  <th mat-header-cell *matHeaderCellDef>Discount</th>
                  <td mat-cell *matCellDef="let billBody">
                    <mat-form-field>
                      <mat-label>Discount</mat-label>
                      <input matInput class="number-column" type="number" [(ngModel)]="billBody.discount" (change)="updateBillBodyValues(billBody)" min="0">
                    </mat-form-field>
                  </td>
                </ng-container>

                <ng-container matColumnDef="discountAmount">
                  <th mat-header-cell *matHeaderCellDef>Discount Amount</th>
                  <td mat-cell *matCellDef="let billBody">
                    {{ billBody.discountAmount }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="tax">
                  <th mat-header-cell *matHeaderCellDef>Tax</th>
                  <td mat-cell *matCellDef="let billBody">
                    <mat-form-field>
                      <mat-label>Tax</mat-label>
                      <input matInput class="number-column" type="number" [(ngModel)]="billBody.tax" (change)="updateBillBodyValues(billBody)" min="0">
                    </mat-form-field>
                  </td>
                </ng-container>

                <ng-container matColumnDef="baseline">
                  <th mat-header-cell *matHeaderCellDef>Baseline</th>
                  <td mat-cell *matCellDef="let billBody">
                    {{ billBody.baseline }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="taxValue">
                  <th mat-header-cell *matHeaderCellDef>Tax Value</th>
                  <td mat-cell *matCellDef="let billBody">
                    {{ billBody.taxAmount }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="totalValue">
                  <th mat-header-cell *matHeaderCellDef>Total Value</th>
                  <td mat-cell *matCellDef="let billBody">
                    {{ billBody.totalPrice }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="delete">
                  <th mat-header-cell *matHeaderCellDef></th>
                  <td mat-cell *matCellDef="let billBody">
                    <button mat-button color="warn" (click)="deleteBillBody(billBody)">Delete</button>
                  </td>
                </ng-container>
            
                <tr mat-header-row *matHeaderRowDef="['select', 'description', 'quantity', 'bamPrice', 'foreignExchangePrice', 'invoiceValue', 'discount', 'discountAmount', 'tax', 'baseline', 'taxValue', 'totalValue', 'delete' ]"></tr>
                <tr mat-row *matRowDef="let row; columns: ['select', 'description', 'quantity', 'bamPrice', 'foreignExchangePrice', 'invoiceValue', 'discount', 'discountAmount', 'tax', 'baseline', 'taxValue', 'totalValue', 'delete'];"></tr>
              </table>
            
              <button mat-button color="primary" (click)="addBillBody()">Add Bill Body</button>
            </div>            

        <div>
            <button mat-button color="primary" (click)="saveBill()">Save</button>
            <button mat-button color="warn" (click)="goBack()">Back</button>
        </div>
    </div>
